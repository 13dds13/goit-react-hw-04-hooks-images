(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e){e.exports=JSON.parse('{"BASE_URL":"https://pixabay.com/api/?","KEY":"23300016-a284ec07e988de3edbd291fb8","searchOptions":{"image_type":"photo","orientation":"horizontal","per_page":12}}')},19:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(13),c=n.n(r),o=(n(19),n(10)),i=n(11),s=n(4),u=n.n(s),l=n(8),m=n(3),b=n(9),j=n.n(b),h=n(5),g=n(14),f=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(n=e.sent,e.prev=3,!n.ok){e.next=6;break}return e.abrupt("return",n.json());case 6:throw new Error("Ooops, something went wrong!");case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),p=f,d=function(e){var t=e.curPage,n=e.query,a=e.KEY,r=e.BASE_URL,c=e.searchOptions,i=new URLSearchParams(Object(o.a)({q:n,page:t,key:a},c));return"".concat(r).concat(i)},O=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},x=n(1),w=function(e){var t=e.onShowMoreBtn,n=e.isLoading;return Object(x.jsx)("button",{className:"Button",type:"button",onClick:t,children:n?Object(x.jsx)(j.a,{type:"ThreeDots",color:"#6186d6",height:200,width:200,timeout:3e3}):Object(x.jsx)("p",{children:"Load more"})})},v=function(e){var t=e.images,n=e.onImgClick;return t.map((function(e){return Object(x.jsx)("li",{className:"ImageGalleryItem",children:Object(x.jsx)("img",{src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image",onClick:function(){return n(e.largeImageURL)}})},e.webformatURL)}))},S=function(e){var t=e.images,n=e.onShowMoreBtn,a=e.onImgClick,r=e.isLoading;return!!t.length&&Object(x.jsxs)("ul",{className:"ImageGallery",children:[Object(x.jsx)(v,{images:t,onImgClick:a}),Object(x.jsx)(w,{onShowMoreBtn:n,isLoading:r})]})},I=function(e){var t=e.onModalClosing,n=e.imageURL,r=function(e){t(e)};return Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}})),Object(x.jsx)("div",{className:"Overlay",onClick:t,children:Object(x.jsx)("div",{className:"Modal",children:Object(x.jsx)("img",{src:n,alt:"large"})})})},y=function(e){var t=e.onSubmite,n=Object(a.useState)(""),r=Object(m.a)(n,2),c=r[0],o=r[1];return Object(x.jsx)("header",{className:"Searchbar",children:Object(x.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(c)},children:[Object(x.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(x.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(x.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){return o(e.target.value)}})]})})},L=h.imagesInit,k=h.queryInit,N=h.modalDataInit,R=h.isLoadingInit,U=h.pageInit,C=function(){var e=Object(a.useState)(L),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(k),s=Object(m.a)(c,2),b=s[0],h=s[1],f=Object(a.useState)(N),w=Object(m.a)(f,2),v=w[0],C=w[1],E=Object(a.useState)(R),B=Object(m.a)(E,2),M=B[0],F=B[1],q=Object(a.useRef)(U),D=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_(t),e.prev=1,P(),e.next=5,p(n);case 5:a=e.sent,r=a.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}})),J(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.prev=13,O(),P(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e){1!==q.current?r((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))})):r(Object(i.a)(e))},T=function(){q.current=1},_=function(e){var t=q.current,n=Object(o.a)({query:e,curPage:t},g);return d(n)},G=function(){q.current+=1},P=function(){return F((function(e){return!e}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y,{onSubmite:function(e){T(),h(e),D(e)}}),M&&!n.length&&Object(x.jsx)(j.a,{type:"ThreeDots",color:"#1539ad",height:100,width:100,timeout:3e3}),Object(x.jsx)(S,{images:n,onShowMoreBtn:function(){G(),D(b)},onImgClick:function(e){C(e)},isLoading:M}),v&&Object(x.jsx)(I,{imageURL:v,onModalClosing:function(e){e.target!==e.currentTarget&&"Escape"!==e.code||C(N)}})]})};c.a.render(Object(x.jsx)(C,{}),document.getElementById("root"))},5:function(e){e.exports=JSON.parse('{"imagesInit":[],"queryInit":"","modalDataInit":"","isLoadingInit":false,"pageInit":1}')}},[[42,1,2]]]);
//# sourceMappingURL=main.ac998e26.chunk.js.map