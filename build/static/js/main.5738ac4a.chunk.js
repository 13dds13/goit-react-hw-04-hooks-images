(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"BASE_URL":"https://pixabay.com/api/?","KEY":"23300016-a284ec07e988de3edbd291fb8","searchOptions":{"image_type":"photo","orientation":"horizontal","per_page":12}}')},20:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(14),o=a.n(r),c=(a(20),a(9)),s=a(12),i=a(3),u=a.n(i),l=a(4),m=a(5),g=a(6),p=a(8),h=a(7),b=a(11),d=a.n(b),f=a(15),j=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(a=e.sent,e.prev=3,!a.ok){e.next=6;break}return e.abrupt("return",a.json());case 6:throw new Error("Ooops, something went wrong!");case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),v=j,O=function(e){var t=e.page,a=e.query,n=e.KEY,r=e.BASE_URL,o=e.searchOptions,s=new URLSearchParams(Object(c.a)({q:a,page:t,key:n},o));return"".concat(r).concat(s)},w=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},y=a(0),S=function(e){var t=e.onShowMoreBtn,a=e.isLoading;return Object(y.jsx)("button",{className:"Button",type:"button",onClick:t,children:a?Object(y.jsx)(d.a,{type:"ThreeDots",color:"#6186d6",height:200,width:200,timeout:5e3}):Object(y.jsx)("p",{children:"Load more"})})},x=function(e){var t=e.images,a=e.onImgClick;return t.map((function(e){return Object(y.jsx)("li",{className:"ImageGalleryItem",children:Object(y.jsx)("img",{src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image",onClick:function(){return a(e.largeImageURL)}})},e.webformatURL)}))},k=function(e){var t=e.images,a=e.onShowMoreBtn,n=e.onImgClick,r=e.isLoading;return!!t.length&&Object(y.jsxs)("ul",{className:"ImageGallery",children:[Object(y.jsx)(x,{images:t,onImgClick:n}),Object(y.jsx)(S,{onShowMoreBtn:a,isLoading:r})]})},L=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onKeyDownEsc=function(t){e.props.onModalClosing(t)},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDownEsc)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDownEsc)}},{key:"render",value:function(){var e=this.props,t=e.imageURL,a=e.onModalClosing;return Object(y.jsx)("div",{className:"Overlay",onClick:a,children:Object(y.jsx)("div",{className:"Modal",children:Object(y.jsx)("img",{src:t,alt:"large"})})})}}]),a}(n.Component),C=L,I=a(10),N=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(I.a)({},n,r))},e.handleSubmite=function(t){t.preventDefault(),e.props.onSubmite(e.state.query)},e}return Object(g.a)(a,[{key:"render",value:function(){return Object(y.jsx)("header",{className:"Searchbar",children:Object(y.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmite,children:[Object(y.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(y.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(y.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"query",value:this.state.query,onChange:this.handleChange})]})})}}]),a}(n.Component),R=N,q=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],query:"",page:1,modalData:"",isLoading:!1},e.getImages=Object(l.a)(u.a.mark((function t(){var a,n,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.query,t.next=3,e.prepareDataForRequest(a);case 3:return n=t.sent,t.prev=4,e.loaderStatusToggler(),t.next=8,v(n);case 8:r=t.sent,o=r.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}})),e.addImagesToState(o),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:return t.prev=16,w(),e.loaderStatusToggler(),t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[4,13,16,20]])}))),e.addImagesToState=function(t){1!==e.state.page?e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(t))}})):e.setState({images:Object(s.a)(t)})},e.onSubmite=function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.resetPageBeforeSubmit();case 2:e.setState({query:a}),e.getImages();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onShowMoreBtn=Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.query,t.next=3,e.increasePageNumber();case 3:e.getImages(a);case 4:case"end":return t.stop()}}),t)}))),e.onImgClick=function(t){e.setState({modalData:t})},e.onModalClosing=function(t){t.target!==t.currentTarget&&"Escape"!==t.code||e.setState({modalData:""})},e.resetPageBeforeSubmit=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({page:1});case 1:case"end":return t.stop()}}),t)}))),e.prepareDataForRequest=function(){var t=Object(l.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.page,r=Object(c.a)({query:a,page:n},f),t.abrupt("return",O(r));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.increasePageNumber=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({page:e.state.page+1});case 1:case"end":return t.stop()}}),t)}))),e.loaderStatusToggler=function(){var t=e.state.isLoading;e.setState({isLoading:!t})},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,n=e.modalData;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(R,{onSubmite:this.onSubmite}),a&&!t.length&&Object(y.jsx)(d.a,{type:"ThreeDots",color:"#1539ad",height:100,width:100,timeout:5e3}),Object(y.jsx)(k,{images:t,onShowMoreBtn:this.onShowMoreBtn,onImgClick:this.onImgClick,isLoading:a}),n&&Object(y.jsx)(C,{imageURL:n,onModalClosing:this.onModalClosing})]})}}]),a}(n.Component),D=q;o.a.render(Object(y.jsx)(D,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.5738ac4a.chunk.js.map